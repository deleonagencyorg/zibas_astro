---
import LazyImage from '../common/LazyImage.astro';

export interface Props {
  title: string;
  description: string;
  gradient: string;
  image: string;
  url?: string;
  id: string;
  clickable?: boolean;
}

const { 
  title,
  description,
  gradient,
  image,
  url = '#',
  id,
  clickable = true,
} = Astro.props;
---

<a 
  href={clickable ? url : '#'}
  class="category-card-link block w-full"
  data-category-id={id}
  aria-disabled={clickable ? 'false' : 'true'}
  onclick={clickable ? undefined : 'return false;'}
  style={clickable ? '' : 'cursor: default;'}
>
  <div class="category-card-inner w-full bg-white overflow-hidden shadow-lg flex flex-col">

    <!-- La imagen escala proporcionalmente al ancho del slide -->
    <div class={`category-card-image relative w-full bg-gradient-to-br ${gradient}`}>
      <LazyImage
        src={image}
        alt={`Imagen de la categoría ${title}`}
        class="absolute inset-0 w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-black bg-opacity-30"></div>
    </div>

    <div class="category-card-text bg-pink w-full flex flex-col justify-center">
      <h3 class="font-title font-bold text-white leading-tight">
        {title}
      </h3>
      <p class="text-white font-medium opacity-90">
        {description}
      </p>
    </div>
  </div>
</a>

<style>
  .category-card-inner {
    border-radius: 20px;
  }

  /* aspect-ratio mantiene la proporción sin importar el ancho */
  .category-card-image {
    aspect-ratio: 4 / 3;
  }

  .category-card-text {
    padding: 12px 14px;
    min-height: 90px;
  }

  .category-card-text h3 {
    font-size: 1rem;
    margin-bottom: 4px;
  }

  .category-card-text p {
    font-size: 0.8rem;
  }

  @media (min-width: 640px) {
    .category-card-inner {
      border-radius: 24px;
    }
    .category-card-text {
      padding: 14px 16px;
      min-height: 100px;
    }
    .category-card-text h3 {
      font-size: 1.1rem;
      margin-bottom: 6px;
    }
    .category-card-text p {
      font-size: 0.85rem;
    }
  }

  @media (min-width: 768px) {
    .category-card-text {
      padding: 16px 18px;
      min-height: 110px;
    }
    .category-card-text h3 {
      font-size: 1.2rem;
    }
    .category-card-text p {
      font-size: 0.9rem;
    }
  }

  @media (min-width: 1024px) {
    .category-card-inner {
      border-radius: 28px;
    }
    /* En desktop imagen más vertical */
    .category-card-image {
      aspect-ratio: 3 / 2.5;
    }
    .category-card-text {
      padding: 18px 20px;
      min-height: 125px;
    }
    .category-card-text h3 {
      font-size: 1.3rem;
      margin-bottom: 8px;
    }
    .category-card-text p {
      font-size: 0.95rem;
    }
  }

  @media (min-width: 1280px) {
    .category-card-inner {
      border-radius: 30px;
    }
    .category-card-image {
      aspect-ratio: 310 / 300;
    }
    .category-card-text {
      padding: 20px 24px;
      min-height: 163px;
    }
    .category-card-text h3 {
      font-size: 1.5rem;
    }
    .category-card-text p {
      font-size: 1rem;
    }
  }
</style>