---
interface Product {
  id: string;
  slug: string;
  name: string;
  image: string;
  imageMobile?: string;
  background_color?: string;
  text_color?: string;
}

export interface Props {
  product: Product;
  currentLang: 'es' | 'en';
  viewMoreText: string;
}

const { product, currentLang, viewMoreText } = Astro.props;

import LazyImage from '../LazyImage.astro';
---

<div class="relative flex w-full flex-col justify-end overflow-visible rounded-[30px] border border-blue-400/20 bg-gradient-to-b from-[#0b0f18] via-[#0d1320] to-[#1a0f14] p-5 sm:min-h-[480px] sm:p-6 md:min-h-[500px] md:p-8 min-h-[420px] ring-1 ring-blue-200/10 shadow-[0_0_40px_rgba(1,103,247,0.15)]">
  {/* Floating image */}
  <div class="absolute left-1/2 top-0 z-20 -translate-x-1/2 -mt-[110px] sm:-mt-[120px] md:-mt-[85px]">
    <LazyImage
      src={product.imageMobile || product.image}
      alt={product.name}
      width={300}
      height={400}
      class="z-20 h-[320px] w-[240px] bg-transparent object-contain max-w-none max-h-none drop-shadow-[0_10px_25px_rgba(0,0,0,0.35)] sm:h-[380px] sm:w-[300px] md:h-[420px] md:w-[320px]"
    />
  </div>

  {/* Bottom content */}
  <div class="absolute bottom-0 left-0 right-0 p-6 text-center text-white">
    <h3 class="mb-5 text-2xl font-semibold tracking-wide md:text-[28px] leading-snug drop-shadow-[0_2px_6px_rgba(0,0,0,0.6)]">
      {product.name}
    </h3>

    <a
      href={`/${currentLang}/${currentLang === 'es' ? 'productos' : 'products'}/${product.id}`}
      class="mx-auto flex w-full max-w-[320px] items-center justify-center gap-2 shrink-0 rounded-[16px] border border-blue-300/40 bg-gradient-to-b from-[#4ea0ff] to-[#1b56e3] px-4 py-4 text-[16px] font-semibold text-white shadow-[0_10px_30px_rgba(1,103,247,0.35)] hover:from-[#64abff] hover:to-[#1b50d3] transition-colors sm:h-[52px] md:h-[58px] md:text-[18px]"
      data-no-swipe="true"
      data-no-animation="true"
    >
      {viewMoreText}
    </a>
  </div>
</div>
